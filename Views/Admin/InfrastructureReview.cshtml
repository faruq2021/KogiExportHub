@model List<InfrastructureProposal>
@{
    ViewData["Title"] = "Infrastructure Review";
}

<div class="container-fluid mt-4">
    <h1 class="mb-4"><i class="bi bi-building"></i> Infrastructure Proposal Review</h1>
    
    <div class="card">
        <div class="card-header">
            <h5>Submitted Infrastructure Proposals</h5>
        </div>
        <div class="card-body">
            @if (Model.Any())
            {
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Proposer</th>
                                <th>Location</th>
                                <th>Category</th>
                                <th>Estimated Cost</th>
                                <th>Submission Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var proposal in Model)
                            {
                                <tr>
                                    <td><strong>@proposal.Title</strong></td>
                                    <td>@proposal.Proposer?.AccountName</td>
                                    <td>@proposal.Location?.Name</td>
                                    <td>@proposal.Category?.Name</td>
                                    <td>â‚¦@proposal.EstimatedCost.ToString("N0")</td>
                                    <td>@proposal.SubmissionDate.ToShortDateString()</td>
                                    <td>
                                        <button type="button" class="btn btn-sm btn-info me-1" onclick="viewProposal(@proposal.Id)">
                                            <i class="bi bi-eye"></i> View
                                        </button>
                                        <button type="button" class="btn btn-sm btn-success me-1" onclick="approveProposal(@proposal.Id, '@proposal.Title')">
                                            <i class="bi bi-check"></i> Approve
                                        </button>
                                        <button type="button" class="btn btn-sm btn-danger" onclick="rejectProposal(@proposal.Id, '@proposal.Title')">
                                            <i class="bi bi-x"></i> Reject
                                        </button>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
            else
            {
                <div class="text-center py-4">
                    <i class="bi bi-inbox display-1 text-muted"></i>
                    <h4 class="text-muted mt-3">No Submitted Proposals</h4>
                    <p class="text-muted">All infrastructure proposals have been processed.</p>
                </div>
            }
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function viewProposal(proposalId) {
            window.location.href = '/Infrastructure/Details/' + proposalId;
        }

        function approveProposal(proposalId, title) {
            if (confirm('Are you sure you want to approve "' + title + '"?')) {
                // Add approval logic here
                alert('Proposal approved successfully!');
            }
        }

        function rejectProposal(proposalId, title) {
            if (confirm('Are you sure you want to reject "' + title + '"?')) {
                // Add rejection logic here
                alert('Proposal rejected successfully!');
            }
        }
    </script>
}